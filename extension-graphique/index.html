
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Formation PyQGIS">
      
      
        <meta name="author" content="3Liz">
      
      
        <link rel="canonical" href="https://docs.3liz.org/formation-pyqgis/extension-graphique/">
      
      
        <link rel="prev" href="../extension-generique/">
      
      
        <link rel="next" href="../extension-processing/">
      
      
      <link rel="icon" href="../media/logo-qgis.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.48">
    
    
      
        <title>Extension Graphique - Formation PyQGIS</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#creer-une-extension-qgis-avec-une-interface-graphique" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href=".." title="Formation PyQGIS" class="md-header__button md-logo" aria-label="Formation PyQGIS" data-md-component="logo">
      
  <img src="../media/logo-qgis.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Formation PyQGIS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Extension Graphique
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/3liz/formation-pyqgis/" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Onglets" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        
  
    
  
  docs.3liz.org

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Accueil

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../python-qgis/" class="md-tabs__link">
          
  
  Présentation

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../console/" class="md-tabs__link">
          
  
  Premier pas

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../action/" class="md-tabs__link">
          
  
  Utilisation simple

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../ecriture-classe-poo/" class="md-tabs__link">
          
  
  Utilisation avancé

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../migration-majeure/" class="md-tabs__link">
          
  
  Sujets PyQGIS thématiques

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../extension-deploiement/" class="md-tabs__link">
          
  
  Outils annexes

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Formation PyQGIS" class="md-nav__button md-logo" aria-label="Formation PyQGIS" data-md-component="logo">
      
  <img src="../media/logo-qgis.png" alt="logo">

    </a>
    Formation PyQGIS
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/3liz/formation-pyqgis/" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docs.3liz.org
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accueil
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Présentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Présentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../python-qgis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python dans QGIS 🐍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation 📖
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../memo-python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mémo Python 🎒
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Premier pas
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Premier pas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../console/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Console 🖥️
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fonctions-scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fonctions & Scripts ♻️
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../selection-parcours-entites/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sélection & Parcours 🏘️
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Utilisation simple
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Utilisation simple
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../action/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Action
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../expression/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Expression
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../formulaire/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Formulaire
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Utilisation avancé
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Utilisation avancé
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ecriture-classe-poo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Écriture de notre classe en POO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../signal-slot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Les signaux et slots
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../script-processing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Script Processing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extension-generique/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extension Générique
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Extension Graphique
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Extension Graphique
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#qtdesigner" class="md-nav__link">
    <span class="md-ellipsis">
      QtDesigner
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QtDesigner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#premier-dialogue" class="md-nav__link">
    <span class="md-ellipsis">
      Premier dialogue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decouverte-de-linterface-qtdesigner" class="md-nav__link">
    <span class="md-ellipsis">
      Découverte de l'interface QtDesigner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajoutons-les-widgets" class="md-nav__link">
    <span class="md-ellipsis">
      Ajoutons les "widgets"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajout-dun-bouton-dans-notre-buttonbox-en-bas" class="md-nav__link">
    <span class="md-ellipsis">
      Ajout d'un bouton dans notre "ButtonBox" en bas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ajout d'un bouton dans notre "ButtonBox" en bas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nommage-de-nos-widgets" class="md-nav__link">
    <span class="md-ellipsis">
      Nommage de nos "widgets"
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#astuces" class="md-nav__link">
    <span class="md-ellipsis">
      Astuces
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#la-classe-qui-accompagne" class="md-nav__link">
    <span class="md-ellipsis">
      La classe qui accompagne
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-signaux-et-les-slots" class="md-nav__link">
    <span class="md-ellipsis">
      Les signaux et les slots
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Les signaux et les slots">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#signaux-des-boutons-de-la-fenetre" class="md-nav__link">
    <span class="md-ellipsis">
      Signaux des boutons de la fenêtre
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Signaux des boutons de la fenêtre">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clic-sur-le-bouton-daide" class="md-nav__link">
    <span class="md-ellipsis">
      Clic sur le bouton d'aide
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signaux-et-proprietes-du-formulaire-de-saisie" class="md-nav__link">
    <span class="md-ellipsis">
      Signaux et propriétés du formulaire de saisie
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#organisation-du-code" class="md-nav__link">
    <span class="md-ellipsis">
      Organisation du code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#un-dossier-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Un dossier "resources"
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Un dossier "resources"">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dans-une-extension-graphique-pour-les-icones" class="md-nav__link">
    <span class="md-ellipsis">
      Dans une extension graphique pour les icônes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dans-une-extension-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Dans une extension "Processing"
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-dune-icone-provenant-de-qgis" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation d'une icône provenant de QGIS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ajouter-un-bouton-pour-lancer-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Ajouter un bouton pour lancer Processing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ajouter un bouton pour lancer Processing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lancer-le-dialogue-de-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Lancer le dialogue de Processing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extension-processing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extension Processing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../standalone/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application standalone
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Sujets PyQGIS thématiques
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Sujets PyQGIS thématiques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migration-majeure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration majeure 🔀
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../postgis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PostGIS 🐘
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../symbologie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Symbologie 🎨
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Outils annexes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Outils annexes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extension-deploiement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Déploiement d'une extension
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ide-git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IDE & Git
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#qtdesigner" class="md-nav__link">
    <span class="md-ellipsis">
      QtDesigner
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QtDesigner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#premier-dialogue" class="md-nav__link">
    <span class="md-ellipsis">
      Premier dialogue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decouverte-de-linterface-qtdesigner" class="md-nav__link">
    <span class="md-ellipsis">
      Découverte de l'interface QtDesigner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajoutons-les-widgets" class="md-nav__link">
    <span class="md-ellipsis">
      Ajoutons les "widgets"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ajout-dun-bouton-dans-notre-buttonbox-en-bas" class="md-nav__link">
    <span class="md-ellipsis">
      Ajout d'un bouton dans notre "ButtonBox" en bas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ajout d'un bouton dans notre "ButtonBox" en bas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nommage-de-nos-widgets" class="md-nav__link">
    <span class="md-ellipsis">
      Nommage de nos "widgets"
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#astuces" class="md-nav__link">
    <span class="md-ellipsis">
      Astuces
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#la-classe-qui-accompagne" class="md-nav__link">
    <span class="md-ellipsis">
      La classe qui accompagne
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-signaux-et-les-slots" class="md-nav__link">
    <span class="md-ellipsis">
      Les signaux et les slots
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Les signaux et les slots">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#signaux-des-boutons-de-la-fenetre" class="md-nav__link">
    <span class="md-ellipsis">
      Signaux des boutons de la fenêtre
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Signaux des boutons de la fenêtre">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clic-sur-le-bouton-daide" class="md-nav__link">
    <span class="md-ellipsis">
      Clic sur le bouton d'aide
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signaux-et-proprietes-du-formulaire-de-saisie" class="md-nav__link">
    <span class="md-ellipsis">
      Signaux et propriétés du formulaire de saisie
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#organisation-du-code" class="md-nav__link">
    <span class="md-ellipsis">
      Organisation du code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#un-dossier-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Un dossier "resources"
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Un dossier "resources"">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dans-une-extension-graphique-pour-les-icones" class="md-nav__link">
    <span class="md-ellipsis">
      Dans une extension graphique pour les icônes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dans-une-extension-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Dans une extension "Processing"
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-dune-icone-provenant-de-qgis" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation d'une icône provenant de QGIS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ajouter-un-bouton-pour-lancer-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Ajouter un bouton pour lancer Processing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ajouter un bouton pour lancer Processing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lancer-le-dialogue-de-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Lancer le dialogue de Processing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="creer-une-extension-qgis-avec-une-interface-graphique">Créer une extension QGIS avec une interface graphique<a class="headerlink" href="#creer-une-extension-qgis-avec-une-interface-graphique" title="Permanent link">#</a></h1>
<p>Pour faire ce chapitre, il faut d'abord avoir une extension de base, à l'aide du chapitre précédent.</p>
<h2 id="qtdesigner">QtDesigner<a class="headerlink" href="#qtdesigner" title="Permanent link">#</a></h2>
<h3 id="premier-dialogue">Premier dialogue<a class="headerlink" href="#premier-dialogue" title="Permanent link">#</a></h3>
<p>Créons un fichier QtDesigner comme-ceci : </p>
<p><img alt="QtDesigner" src="../media/qt_designer_0.png" /></p>
<h3 id="decouverte-de-linterface-qtdesigner">Découverte de l'interface QtDesigner<a class="headerlink" href="#decouverte-de-linterface-qtdesigner" title="Permanent link">#</a></h3>
<ul>
<li>Faire le tour des "widgets", de "l'object inspector" et des "property"</li>
<li>Privilégier les "widgets QGIS" si possible</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Privilégier aussi les "Item Widgets (Item Based)" plutôt que les "Item Views (Model Based) pour débuter.</p>
</div>
<h3 id="ajoutons-les-widgets">Ajoutons les "widgets"<a class="headerlink" href="#ajoutons-les-widgets" title="Permanent link">#</a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Ne tenez pas compte de l'alignement des widgets pour le moment. On fait juste un placement "rapide"
vertical des widgets.</p>
</div>
<p>Dans l'ordre vertical, ce sont ces classes :</p>
<table>
<thead>
<tr>
<th>Classe</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QLabel</code></td>
</tr>
<tr>
<td><code>QLineEdit</code></td>
</tr>
<tr>
<td><code>QgsMapLayerComboBox</code></td>
</tr>
<tr>
<td><code>QPlainTextEdit</code></td>
</tr>
<tr>
<td>Vertical spacer</td>
</tr>
<tr>
<td><code>QDialogButtonBox</code></td>
</tr>
</tbody>
</table>
<p><img alt="QtDesigner" src="../media/qt_designer_1.jpg" /></p>
<p>Une fois que l'ensemble des "widgets" sont présents, on peut faire un clic droit à droite sur notre <code>QDialog</code>,
puis <code>Mise en page</code> et enfin <code>Verticalement</code> 🚀</p>
<h3 id="ajout-dun-bouton-dans-notre-buttonbox-en-bas">Ajout d'un bouton dans notre "ButtonBox" en bas<a class="headerlink" href="#ajout-dun-bouton-dans-notre-buttonbox-en-bas" title="Permanent link">#</a></h3>
<p>Ajoutons le bouton d'<strong>aide</strong>, dans les propriétés de notre widget <code>QDialogButtonBox</code>.</p>
<h4 id="nommage-de-nos-widgets">Nommage de nos "widgets"<a class="headerlink" href="#nommage-de-nos-widgets" title="Permanent link">#</a></h4>
<p>Pour chacun de nos widgets, changeons le nom par défaut de l'objet, propriété <code>objectName</code> tout en haut :</p>
<table>
<thead>
<tr>
<th>Classe</th>
<th>Nom par défaut de <code>objectName</code></th>
<th>Nouveau nom pour <code>objectName</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QLineEdit</code></td>
<td><code>lineEdit</code></td>
<td><code>input_text</code></td>
</tr>
<tr>
<td><code>QgsMapLayerComboBox</code></td>
<td><code>mMapLayerComboBox</code></td>
<td><code>couche</code></td>
</tr>
<tr>
<td><code>QPlainTextEdit</code></td>
<td><code>plainTextEdit</code></td>
<td><code>metadata</code></td>
</tr>
<tr>
<td><code>QDialogButtonBox</code></td>
<td><code>buttonBox</code></td>
<td><code>button_box</code></td>
</tr>
</tbody>
</table>
<p>Cette propriété <code>objectName</code> est très importante, car elle détermine l'appellation de notre <strong>propriété</strong> dans
l'objet <code>self</code> pour la suite du TP.</p>
<h3 id="astuces">Astuces<a class="headerlink" href="#astuces" title="Permanent link">#</a></h3>
<ul>
<li>Ouvrir la page des "slots/signaux" depuis la barre d'outils et supprimer ceux qui existent.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Pourquoi supprimer les signaux de QtDesigner ?</p>
<p>Un fichier <strong>QtDesigner</strong> est "gros" fichier XML. Il est difficile, dans le temps, de suivre ces modifications,
changement…</p>
<p>Il est, à mon avis, plus simple de garder le fichier XML le plus léger possible, et de garder la logique dans le code
Python. Un signal en XML, c'est plusieurs lignes dans le fichier UI, alors que en Python, c'est une seule ligne.</p>
</div>
<p>On peut <a href="../solution/dialog.ui">télécharger</a> la solution si besoin.</p>
<ul>
<li>Enregistrer le fichier en <code>dialog.ui</code> dans votre dossier contenant l'ensemble des fichiers.</li>
</ul>
<h2 id="la-classe-qui-accompagne">La classe qui accompagne<a class="headerlink" href="#la-classe-qui-accompagne" title="Permanent link">#</a></h2>
<p>Créons un fichier <code>dialog.py</code> avec le contenu suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Les imports</span>
<span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="n">Qgis</span>
<span class="kn">from</span> <span class="nn">qgis.utils</span> <span class="kn">import</span> <span class="n">iface</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtWidgets</span> <span class="kn">import</span> <span class="n">QDialog</span><span class="p">,</span> <span class="n">QDialogButtonBox</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt</span> <span class="kn">import</span> <span class="n">uic</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># Permettre d&#39;aller chercher le fichier UI correspondant</span>
<span class="n">folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span>
<span class="n">ui_file</span> <span class="o">=</span> <span class="n">folder</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s1">&#39;dialog.ui&#39;</span><span class="p">)</span>
<span class="n">ui_class</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">uic</span><span class="o">.</span><span class="n">loadUiType</span><span class="p">(</span><span class="n">ui_file</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MonDialog</span><span class="p">(</span><span class="n">ui_class</span><span class="p">,</span> <span class="n">QDialog</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot; Classe qui représente le dialogue de l&#39;extension. &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">QDialog</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Constructeur. &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>  <span class="c1"># Appel du constructeur parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>  <span class="c1"># Stockage du parent dans self, on va l&#39;utiliser plus tard, si besoin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># Fichier de QtDesigner</span>

        <span class="c1"># Quelques propriétés facultatives</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Notre super machine à café&quot;</span><span class="p">)</span>
        <span class="c1"># self.setModal(False)  # Utile plus bas si on souhaite ouvrir une autre fenêtre par-dessus</span>
</code></pre></div></td></tr></table></div>
<p>Modifions la méthode <code>run</code> du fichier <code>__init__.py</code> en</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Lors du clic sur le bouton pour lancer la fenêtre de l&#39;extension. &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.dialog</span> <span class="kn">import</span> <span class="n">MonDialog</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">MonDialog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>Relançons l'extension à l'aide du "plugin reloader" et cliquons sur le bouton.</p>
<h2 id="les-signaux-et-les-slots">Les signaux et les slots<a class="headerlink" href="#les-signaux-et-les-slots" title="Permanent link">#</a></h2>
<h3 id="signaux-des-boutons-de-la-fenetre">Signaux des boutons de la fenêtre<a class="headerlink" href="#signaux-des-boutons-de-la-fenetre" title="Permanent link">#</a></h3>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>N'hésitez pas à relire le chapitre sur les <a href="../signal-slot/">signaux</a>.</p>
</div>
<p>Connectons le signal <code>clicked</code> du bouton "Annuler" dans le constructeur <code>__init__</code> : </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="bp">self</span><span class="o">.</span><span class="n">button_box</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">StandardButton</span><span class="o">.</span><span class="n">Cancel</span><span class="p">)</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>On dit que <code>clicked</code> est un <strong>signal</strong>, auquel on connecte le <strong>slot</strong> <code>close</code>.</p>
<p>Connectons-le <strong>signal</strong> <code>clicked</code> du bouton "Accepter" à notre propre <strong>slot</strong> (qui est une fonction) :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="bp">self</span><span class="o">.</span><span class="n">button_box</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">StandardButton</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">click_ok</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Ensuite, ajoutons notre propre fonction <code>click_ok</code> pour quitter la fenêtre et en affichant la saisie de
l'utilisateur dans la QgsMessageBar de QGIS.</p>
<p>Le widget de saisie est un QLineEdit : <a href="https://doc.qt.io/qt-5/qlineedit.html">documentation Qt</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">click_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Clic sur le bouton OK afin de fermer la fenêtre. &quot;&quot;&quot;</span>
    <span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_text</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
    <span class="n">iface</span><span class="o">.</span><span class="n">messageBar</span><span class="p">()</span><span class="o">.</span><span class="n">pushMessage</span><span class="p">(</span><span class="s1">&#39;Notre extension&#39;</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">Qgis</span><span class="o">.</span><span class="n">Success</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>Faire le test dans QGIS avec une saisie de l'utilisateur et fermer la fenêtre.</p>
<h4 id="clic-sur-le-bouton-daide">Clic sur le bouton d'aide<a class="headerlink" href="#clic-sur-le-bouton-daide" title="Permanent link">#</a></h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Dans le constructeur :</span>
<span class="bp">self</span><span class="o">.</span><span class="n">button_box</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">StandardButton</span><span class="o">.</span><span class="n">Help</span><span class="p">)</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">open_help</span><span class="p">)</span>

<span class="c1"># Puis la fonction :</span>
<span class="k">def</span> <span class="nf">open_help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Open the online help. &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QDesktopServices</span>
    <span class="kn">from</span> <span class="nn">qgis.PyQt.QtCore</span> <span class="kn">import</span> <span class="n">QUrl</span>
    <span class="n">QDesktopServices</span><span class="o">.</span><span class="n">openUrl</span><span class="p">(</span><span class="n">QUrl</span><span class="p">(</span><span class="s1">&#39;https://www.youtube.com/watch?v=AdQ3JDLlmPI&#39;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
<h3 id="signaux-et-proprietes-du-formulaire-de-saisie">Signaux et propriétés du formulaire de saisie<a class="headerlink" href="#signaux-et-proprietes-du-formulaire-de-saisie" title="Permanent link">#</a></h3>
<p>Continuons en rendant en lecture seule le gros bloc de texte et affichons à l'intérieur la description de
la couche qui est sélectionnée dans le menu déroulant.</p>
<p>Documentation :</p>
<ul>
<li>QPlainTextEdit <a href="https://doc.qt.io/qt-5/qplaintextedit.html">CPP</a>, on va utiliser <code>appendPlainText</code> et <code>clear</code>.</li>
<li>QgsMapLayerComboBox <a href="https://qgis.org/api/classQgsMapLayerComboBox.html">CPP</a> / <a href="https://qgis.org/pyqgis/3.34/gui/QgsMapLayerComboBox.html">PyQGIS</a>, on va utiliser <code>currentLayer</code>.</li>
</ul>
<p>Dans la fonction <code>__init__</code> du fichier <code>dialog.py</code> :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">couche</span><span class="o">.</span><span class="n">layerChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_changed</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Et la nouvelle fonction qui va se charger de mettre à jour le texte :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">layer_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Permet de mettre à jour l&#39;UI selon la couche dans le menu déroulant. &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">couche</span><span class="o">.</span><span class="n">currentLayer</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">appendPlainText</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">name</span><span class="p">()</span><span class="si">}</span><span class="s2"> : CRS → </span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">crs</span><span class="p">()</span><span class="o">.</span><span class="n">authid</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Que remarquez-vous en terme d'ergonomie, à l'ouverture de la fenêtre ?</p>
</div>
<details>
<summary>La solution plus complète</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">couche</span><span class="o">.</span><span class="n">currentLayer</span><span class="p">()</span>
<span class="k">if</span> <span class="n">layer</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">appendPlainText</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">name</span><span class="p">()</span><span class="si">}</span><span class="s2"> : CRS → </span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">crs</span><span class="p">()</span><span class="o">.</span><span class="n">authid</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">appendPlainText</span><span class="p">(</span><span class="s2">&quot;Pas de couche&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
<p>On peut donc désormais cumuler l'ensemble des chapitres précédents pour lancer des algorithmes, manipuler les
données, etc.</p>
<div class="admonition tip">
<p class="admonition-title">Bonus</p>
<p>Le texte actuel concernant les métadonnées est "limité". N'hésitez pas à compléter, un peu comme lors de l'exercice
avec le fichier CSV, <a href="../fonctions-scripts/#extraction-des-informations-sous-forme-dun-fichier-csv">pour rappel</a> :</p>
<ul>
<li>La source de la couche</li>
<li>Le nombre d'entité</li>
<li>Des informations que l'on retrouve dans le panneau "Informations" des propriétés d'une couche</li>
<li>…</li>
</ul>
</div>
<h2 id="solution">Solution<a class="headerlink" href="#solution" title="Permanent link">#</a></h2>
<details class="afficher">
<summary>Afficher</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="n">Qgis</span>
<span class="kn">from</span> <span class="nn">qgis.utils</span> <span class="kn">import</span> <span class="n">iface</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtWidgets</span> <span class="kn">import</span> <span class="n">QDialog</span><span class="p">,</span> <span class="n">QDialogButtonBox</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt</span> <span class="kn">import</span> <span class="n">uic</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="n">folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span>
<span class="n">ui_file</span> <span class="o">=</span> <span class="n">folder</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s1">&#39;dialog.ui&#39;</span><span class="p">)</span>
<span class="n">ui_class</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">uic</span><span class="o">.</span><span class="n">loadUiType</span><span class="p">(</span><span class="n">ui_file</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MonDialog</span><span class="p">(</span><span class="n">ui_class</span><span class="p">,</span> <span class="n">QDialog</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot; Classe qui représente le dialogue de l&#39;extension. &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Constructeur. &quot;&quot;&quot;</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="c1"># TODO CORRECTION</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># Fichier de QtDesigner</span>

        <span class="c1"># Connectons les signaux</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_box</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">StandardButton</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">click_ok</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_box</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">StandardButton</span><span class="o">.</span><span class="n">Cancel</span><span class="p">)</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">couche</span><span class="o">.</span><span class="n">layerChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_changed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_changed</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">click_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Clic sur le bouton OK afin de fermer la fenêtre. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_text</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">iface</span><span class="o">.</span><span class="n">messageBar</span><span class="p">()</span><span class="o">.</span><span class="n">pushMessage</span><span class="p">(</span><span class="s1">&#39;Notre extension&#39;</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">Qgis</span><span class="o">.</span><span class="n">Success</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">layer_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Permet de mettre à jour l&#39;UI selon la couche dans le menu déroulant. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">couche</span><span class="o">.</span><span class="n">currentLayer</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">layer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">appendPlainText</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">name</span><span class="p">()</span><span class="si">}</span><span class="s2"> : CRS → </span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">crs</span><span class="p">()</span><span class="o">.</span><span class="n">authid</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">appendPlainText</span><span class="p">(</span><span class="s2">&quot;Pas de couche&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
<h2 id="organisation-du-code">Organisation du code<a class="headerlink" href="#organisation-du-code" title="Permanent link">#</a></h2>
<p>Il ne faut pas hésiter à créer des fichiers Python afin de séparer le code.</p>
<p>On peut aussi créer des dossiers afin d'y mettre plusieurs fichiers Python. Un dossier en Python se nomme un
<strong>module</strong>. Pour faire un module compatible, pour Python, il faut <strong>toujours</strong> avoir un fichier
<strong><code>__init__.py</code></strong> même s’il n'y a rien dedans.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Il ne faut vraiment pas oublier le fichier <code>__init__.py</code>. Cela peut empêcher Python de fonctionner
correctement. Un bon <a href="../ide-git/#utilisation-dun-ide">IDE</a> peut signaler ce genre d'erreur.</p>
</div>
<p>Dans l'exemple ci-dessus, on peut diviser le code du fichier <code>__init__.py</code> :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">classFactory</span><span class="p">(</span><span class="n">iface</span><span class="p">):</span>
    <span class="c1"># from minimal_plugin.plugin import MinimalPlugin  # Import absolue</span>
    <span class="kn">from</span> <span class="nn">.plugin</span> <span class="kn">import</span> <span class="n">MinimalPlugin</span>  <span class="c1"># Import relatif</span>
    <span class="k">return</span> <span class="n">MinimalPlugin</span><span class="p">(</span><span class="n">iface</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>En faisant un couper/coller, enlever la classe <code>MinimalPlugin</code> du fichier <code>__init__.py</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>On essaie souvent d'avoir une classe par fichier en Python.</p>
</div>
<p>Créer un fichier <code>plugin.py</code> et ajouter le contenu en collant. Il est bien de vérifier les imports dans les
deux fichiers.</p>
<h2 id="un-dossier-resources">Un dossier "resources"<a class="headerlink" href="#un-dossier-resources" title="Permanent link">#</a></h2>
<p>On peut créer un fichier <code>qgis_plugin_tools.py</code> à la racine de notre extension afin d'y ajouter des <strong>outils</strong> :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="sd">&quot;&quot;&quot;Tools to work with resources files.&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>


<span class="k">def</span> <span class="nf">plugin_path</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the path to the plugin root folder.&quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">path</span>


<span class="k">def</span> <span class="nf">resources_path</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the path to the plugin resources folder.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">plugin_path</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>

<span class="c1"># On peut ajouter ici une méthode qui charge un fichier UI qui se trouve dans le dossier &quot;UI&quot;</span>
<span class="c1"># et retourne la classe directement.</span>
</code></pre></div></td></tr></table></div>
<p>On peut ensuite créer un dossier <code>resources</code> puis <code>icons</code> afin d'y déplacer un fichier PNG, JPG, SVG.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Attention à la taille de vos fichiers pour une petite icône 😉</p>
</div>
<details>
<summary>Pour les experts, solution pour faire une fonction qui charge un fichier UI</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_ui</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get compiled UI file.</span>

<span class="sd">    :param args List of path elements e.g. [&#39;img&#39;, &#39;logos&#39;, &#39;image.png&#39;]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ui_class</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">uic</span><span class="o">.</span><span class="n">loadUiType</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">resources_path</span><span class="p">(</span><span class="s2">&quot;ui&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">ui_class</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="dans-une-extension-graphique-pour-les-icones">Dans une extension graphique pour les icônes<a class="headerlink" href="#dans-une-extension-graphique-pour-les-icones" title="Permanent link">#</a></h3>
<p><a href="https://doc.qt.io/qt-6/qaction.html">Lien documentation QAction</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># En haut du fichier, on ajoute les imports nécessaires</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>
<span class="kn">from</span> <span class="nn">.qgis_plugin_tools</span> <span class="kn">import</span> <span class="n">resources_path</span>

<span class="c1"># Plus bas dans le code</span>
<span class="c1"># Quand nécessaire, à remplacer la QAction existante. Il s&#39;agit du premier paramètre avec QIcon</span>
<span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span>
    <span class="n">QIcon</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">resources_path</span><span class="p">(</span><span class="s1">&#39;icons&#39;</span><span class="p">,</span> <span class="s1">&#39;icon.svg&#39;</span><span class="p">))),</span>
    <span class="s1">&#39;Go!&#39;</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Ce qu'il faut retenir, c'est l'usage de <code>QIcon(str(resources_path('icons', 'icon.svg')))</code> si l'on souhaite utiliser
une icône dans autre endroit de l'extension.</p>
</div>
<h3 id="dans-une-extension-processing">Dans une extension "Processing"<a class="headerlink" href="#dans-une-extension-processing" title="Permanent link">#</a></h3>
<p>Dans le <strong>provider</strong> et les <strong>algorithmes</strong> :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># En haut du fichier</span>
<span class="kn">from</span> <span class="nn">..qgis_plugin_tools</span> <span class="kn">import</span> <span class="n">resources_path</span>

<span class="c1"># Dans la classe, on ajoute/modifie la méthode &#39;icon&#39;</span>
<span class="k">def</span> <span class="nf">icon</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QIcon</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">QIcon</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">resources_path</span><span class="p">(</span><span class="s2">&quot;icons&quot;</span><span class="p">,</span> <span class="s2">&quot;icon.png&quot;</span><span class="p">)))</span>
</code></pre></div></td></tr></table></div>
<h2 id="utilisation-dune-icone-provenant-de-qgis">Utilisation d'une icône provenant de QGIS<a class="headerlink" href="#utilisation-dune-icone-provenant-de-qgis" title="Permanent link">#</a></h2>
<p>À l'aide de l'extension "PyQGIS Resource Browser", rechercher une icône concordant avec bouton :</p>
<ul>
<li><code>new</code> pour trouver les icônes ayant la petite étoile jaune</li>
<li><code>select</code> pour trouver les icônes ayant la notion de sélection, avec le fond jaune</li>
<li><code>delete</code> ou <code>remove</code> pour la suppression</li>
<li>…</li>
</ul>
<p>On peut ensuite faire un clic-droit, puis coller son <strong>chemin</strong>.</p>
<p>Ensuite, quand on souhaite utiliser l'icône :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># En haut</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>

<span class="c1"># Ensuite</span>
<span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/images/themes/default/algorithms/mAlgorithmBuffer.svg&quot;</span><span class="p">)</span>

<span class="c1"># Par exemple sur un bouton QPushButton</span>
<span class="bp">self</span><span class="o">.</span><span class="n">un_bouton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/images/themes/default/algorithms/mAlgorithmBuffer.svg&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
<h2 id="ajouter-un-bouton-pour-lancer-processing">Ajouter un bouton pour lancer Processing<a class="headerlink" href="#ajouter-un-bouton-pour-lancer-processing" title="Permanent link">#</a></h2>
<p>Nous souhaitons ajouter 2 boutons :</p>
<p><img alt="Les deux nouveaux boutons" src="../media/qt_designer_2.jpg" /></p>
<table>
<thead>
<tr>
<th>Classe</th>
<th><code>objectName</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>QPushButton</code></td>
<td><code>btn_traitement_1</code></td>
</tr>
<tr>
<td><code>QPushButton</code></td>
<td><code>btn_traitement_2</code></td>
</tr>
</tbody>
</table>
<p>On peut faire la mise en page vertical dans le <code>QGroupBox</code>.</p>
<p>Ajoutons les icônes et infobulles si nécessaires, dans le constructeur :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="bp">self</span><span class="o">.</span><span class="n">btn_traitement_1</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Permet de lancer l&#39;algorithme des tampons sur la couche ci-dessus avec un buffer de 2km&quot;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">btn_traitement_1</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/images/themes/default/algorithms/mAlgorithmBuffer.svg&quot;</span><span class="p">))</span>
<span class="bp">self</span><span class="o">.</span><span class="n">btn_traitement_1</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">traitement_1_clicked</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="lancer-le-dialogue-de-processing">Lancer le dialogue de Processing<a class="headerlink" href="#lancer-le-dialogue-de-processing" title="Permanent link">#</a></h3>
<p>Pour les imports :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="n">QgsVectorLayer</span>
<span class="kn">from</span> <span class="nn">qgis</span> <span class="kn">import</span> <span class="n">processing</span>
</code></pre></div></td></tr></table></div>
<p>Pour le code dans la fonction :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">traitement_1_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Lancement de la fenêtre de QGIS Processing. &quot;&quot;&quot;</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">couche</span><span class="o">.</span><span class="n">currentLayer</span><span class="p">()</span>

    <span class="c1"># Les pré-requis pour continuer</span>
    <span class="c1"># On sort de la fonction si on ne peut pas continuer</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">QgsVectorLayer</span><span class="p">):</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">layer</span><span class="o">.</span><span class="n">isSpatial</span><span class="p">():</span>
        <span class="k">return</span>

    <span class="n">dialog</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">createAlgorithmDialog</span><span class="p">(</span>
        <span class="s2">&quot;native:buffer&quot;</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s1">&#39;INPUT&#39;</span><span class="p">:</span> <span class="n">layer</span><span class="p">,</span>
            <span class="s1">&#39;DISTANCE&#39;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
            <span class="s1">&#39;OUTPUT&#39;</span><span class="p">:</span> <span class="s1">&#39;TEMPORARY_OUTPUT&#39;</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="n">dialog</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>Pour rappel, nous ne sommes pas obligé d'ouvrir la fenêtre de Processing, on peut directement faire <code>processing.run</code>,
lire le <a href="../script-processing/#utiliser-processing-en-python-avec-un-algorithme-existant">chapitre précédent</a>. Il ne
faut pas oublier de donner la variable <code>layer</code> à notre <code>INPUT</code> si vous copiez/coller le code de <code>processing.run</code> du
chapitre précédent.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Retour en haut de la page
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <span class="copyleft">&copy;</span> 3Liz
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/3LIZ_news" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/3liz" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/3liz/" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/u/3liz" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.youtube.com/channel/UCYYW2CTWR_84kB6pt2zCWbQ" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.top", "content.code.copy"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@8.6.4/dist/mermaid.min.js"></script>
      
    
  </body>
</html>